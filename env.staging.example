# ──────────────────────────────────────────────────────────────────────────────
# flash-green-poc – staging template
# Copy to .env for internal testing or QA-like environments.
# ──────────────────────────────────────────────────────────────────────────────

# Feature toggles
USE_LIVE_FEED=0
USE_POWERLEDGER_LIVE=0
USE_ICE_LIVE=0
USE_WEB3_LOAN=0
USE_DEPTH_SIM=1

# Strategy knobs
NEG_THRESHOLD=0
SPREAD_MIN=50
KELLY_BANK_GBP=50000

# Risk limits
MAX_NOTIONAL_PER_TRADE=10000
MAX_DAILY_LOSS_GBP=500
LOAN_LIMIT_GBP=100000

# Live feed placeholders (only required when USE_LIVE_FEED=1)
LIVE_EXCHANGE=binance
LIVE_SYMBOL=BTC/USDT
LIVE_API_KEY=
LIVE_API_SECRET=

# Powerledger live connectivity (set to 1 and populate below when testing against the UAT node)
POWERLEDGER_API_URL=https://uat.powerledger.io/trading
POWERLEDGER_API_TOKEN=
POWERLEDGER_ORG=energy-desk-sbox
POWERLEDGER_MARKET=uk-grid-uat

# ICE trading placeholders (only required when USE_ICE_LIVE=1)
ICE_API_URL=
ICE_API_KEY=
ICE_API_SECRET=
ICE_SYMBOL=UK_BASELOAD_Q2_2025

# Trading window controls (UTC)
TRADING_WINDOW_UTC=07:00-19:00
ALLOW_WEEKEND_TRADING=0

# Flash-loan configuration (only required when USE_WEB3_LOAN=1)
FLASH_LOAN_CONTRACT=
FLASH_LOAN_RECEIVER=
LENDER_KEY=
HARDHAT_RPC=http://127.0.0.1:8545

# Metrics / API ports
METRICS_PORT=8000
API_PORT=8002
# Required for all deployments
API_KEY=
# Development-only auth bypass (keep 0 in staging/prod)
ALLOW_INSECURE_LOCAL_AUTH=0
# TLS termination / identity enforcement
REQUIRE_HTTPS=1
FORWARDED_PROTO_HEADER=x-forwarded-proto
TLS_CERTFILE=/etc/tls/tls.crt
TLS_KEYFILE=/etc/tls/tls.key
TLS_CLIENT_CA=/etc/tls/ca.crt
CLIENT_CERT_SUBJECT_HEADER=X-SSL-Client-Subject
MTLS_ALLOWED_SUBJECTS=
MTLS_ASSIGNED_ROLES=admin
OIDC_ISSUER=https://issuer.staging.example.com/
OIDC_AUDIENCE=flash-green-api
OIDC_JWKS_URL=https://issuer.staging.example.com/.well-known/jwks.json
OIDC_ALLOWED_ALGS=RS256
CONTROL_PLANE_ROLES=admin

# Database (managed service)
DATABASE_URL=postgresql+psycopg2://flashgreen:flashgreen@db:5432/flash_green
# Alternatively, specify discrete fields:
# DB_DRIVER=postgresql
# DB_HOST=db
# DB_PORT=5432
# DB_NAME=flash_green
# DB_USER=flashgreen
# DB_PASSWORD=flashgreen

# Secret manager (staging defaults to Vault)
SECRETS_BACKEND=vault
VAULT_ADDR=https://vault.staging.example.com
VAULT_TOKEN=
VAULT_SECRET_PATH=secret/data/flash-green/staging

# AWS block is unused unless SECRETS_BACKEND=aws
AWS_SECRETS_REGION=eu-west-2
AWS_SECRETS_ID=flash-green/staging
